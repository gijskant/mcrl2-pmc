project toolset/mcrl22lps/test ;

use-project /tools/mcrl22lps : $(TOP)/tools/mcrl22lps ;
use-project /tools/lpspp : $(TOP)/tools/lpspp ;

test-cases = [ glob-tree *.mcrl2 ] ;

for file in $(test-cases) {
  tests-with-files += [
        run /tools/mcrl22lps//mcrl22lps
              : -D
              : $(file)
              : <testing.preserve>true
                <testing.post-pipes>/tools/lpspp//lpspp
              : mcrl22lps-$(file:B) ] ;
}

test-suite mcrl22lps
    : $(tests-with-files)
    ;

