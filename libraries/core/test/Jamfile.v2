import testing ;

project libraries/core/test
   : source-location .
   : requirements
      <use>/libraries/utilities//headers
      <use>/libraries/atermpp//headers
      <use>/libraries/core//headers
      <use>/boost//headers 
      <library>/libraries//core
   ;

use-project /tools/mcrl22lps : $(TOP)/tools/mcrl22lps ;

for file in [ glob-tree *.mcrl2 ] {
  tests-with-files += [
        run /tools/mcrl22lps//mcrl22lps
              : # no arguments
              : $(file)
              : <testing.preserve>true
              : mcrl22lps-core-$(file:B) ] ;
}

test-suite core
    : [ run test_lib.cpp ]
      $(tests-with-files)
      [ run beta_reduce_test.cpp ]
      [ run text_utility_test.cpp ]
      [ run sequence_test.cpp ]
      [ run reachable_nodes_test.cpp ]
    ;
