project ltsview
  : build-dir $(BUILD_TOP)
  : requirements
    <include>.
    <include>..
  ;

import lex : lex ;
import bison : bison ;

include $(TOP)/config.jam ;

lib GLUT
      :
      : <toolset>darwin:<linkflags>"-framework GLUT"
        <os>windows:<name>glut32
        <name>glut
      ;

lib GL
      :
      : <toolset>darwin:<linkflags>"-framework OpenGL"
        <os>windows:<name>opengl32
        <name>GL
      ;

cpp fsmlexer.cpp
      : fsmlexer.ll
      : <flex.prefix>"fsm"
      ;

lib fsm
      : fsmparser.yy
      : <bison.prefix>"fsm"
        <implicit-dependency>fsmlexer.cpp
        <dependency>/libraries/aterm//aterm
      ;

# This file does not belong here anymore, it is shared with ltsgraph
obj spinctrlfloat
      : spinctrlfloat.cpp
      : <cxxflags>"$(WX_CPPFLAGS)"
      ;

exe ltsview
      : ltsviewapp.cpp
        mainframe.cpp
        glcanvas.cpp
        markstateruledialog.cpp
        colorbutton.cpp
        lts.cpp
        state.cpp
        transition.cpp
        fileloader.cpp
        visualizer.cpp
        cluster.cpp
        utils.cpp
        fsm
        spinctrlfloat
        GLUT
        GL
        /libraries/temporary//lowlevel
        /libraries/aterm//aterm
      : <implicit-dependency>fsm
        <cxxflags>"$(WX_CPPFLAGS)"
        <linkflags>"$(WX_GL_LDFLAGS)"
      ;

alias install
      : install-libraries
        install-binaries
      ;

install install-binaries
      : ltsview
      : <dll-path>$(LIB_DIR)
        <location>$(BIN_DIR)
      ;

install install-libraries
      : ltsview
      : <install-dependencies>on <install-type>LIB
      : <location>$(LIB_DIR)
      ;

explicit install install-binaries install-libraries ;
