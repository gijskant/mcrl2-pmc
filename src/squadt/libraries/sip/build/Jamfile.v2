import feature : feature ;

project squadt/libraries/sip
    : source-location
       ../source
    : build-dir $(BUILD_TOP)
    : requirements
       <threading>multi
       <include>$(BOOST)
       <include>../include
    : usage-requirements
       <include>../..
       <include>../include
    ;

alias messenger
    : # no sources
      layout.cpp
      common.cpp
      report.cpp
      layout_elements.cpp
      basic_messenger.cpp
    : # no build requirements
    : # no default build
    : <library>/libraries/transport//transport
      <library>/boost//thread
      <library>/libraries/xml2pp//xml2pp
    ;

feature sip_side : controller tool : composite optional ;

feature.compose <sip_side>controller : <define>CONTROLLER_SIDE ;
feature.compose <sip_side>tool       : <define>TOOL_SIDE ;

lib sip_controller
    : controller.cpp
      layout_base.cpp
    : <sip_side>controller
      <library>messenger
    ;

lib sip_tool
    : tool.cpp
      layout_base.cpp
    : <sip_side>tool
      <library>messenger
    ;
